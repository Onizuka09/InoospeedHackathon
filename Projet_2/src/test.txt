#include <Arduino.h>
#include <LiquidCrystal_I2C.h>

int IR = 2;
int val1 = 0;
int prevVal1 = 0; // Variable to store the previous state of the IR sensor
int counter = 0;

LiquidCrystal_I2C lcd(0x27, 16, 2); // I2C address 0x27, 16 column and 2 rows

void setup() {
  pinMode(IR, INPUT);
  lcd.init(); // initialize the lcd
  lcd.backlight();
}

void loop() {
  val1 = digitalRead(IR); // Read the current state of the IR sensor

  // Detect rising edge (front montant)
  if (val1 == HIGH && prevVal1 == LOW) {
    counter++; // Increment the counter
    lcd.clear(); // Clear the display
    lcd.setCursor(0, 0); // Move cursor to (0, 0)
    lcd.print("Front Montant"); // Print message
    lcd.setCursor(0, 1); // Move cursor to (0, 1)
    lcd.print("Counter: "); // Print "Counter: "
    lcd.print(counter); // Print the counter value
    delay(2000); // Display the message for 2 seconds
  }

  prevVal1 = val1; // Update the previous state of the IR sensor

  // Optional: Display the counter value continuously
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("Counter: ");
  lcd.print(counter);
  delay(2000);
}